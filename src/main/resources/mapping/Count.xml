<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.javaweb_week.salefood.dao.FoodsDao">
    <resultMap id="result_Count_Map" type="com.javaweb_week.salefood.entity.*">
        <id column="count0" property="mid"></id>
        <result column="count1" property="mname"></result>
        <result column="count2" property="onum"></result>
        <result column="count3" property="oyear"></result>
        <result column="count4" property="omonth"></result>
        <result column="count5" property="oday"></result>
    </resultMap>

    <sql id="Count_Column1">
        meat.mid as count0
        ,meat.mname as count1
        ,orderinfo.onum as count2
        ,orders.oyear as count3
        ,orders.omonth as count4
        ,orders.oday as count5
    </sql>

    <select id="selectCount" resultMap="result_Count_Map">
        select
        <include refid="Count_Column1" />
        from meat,orderinfo,orders
        where meat.mid=orderinfo.mid and orderinfo.oid=orders.oid
        order by meat.mid
    </select>

    <select id="selectCountbyName" resultMap="result_Count_Map">
        select
        <include refid="Count_Column1"/>
        from meat,orderinfo,orders
        where meat.mid=orderinfo.mid and orderinfo.oid=orders.oid and meat.name=#{Mname} and orders.oyear=#{oyear}
        and orders.omonth=#{omonth} and order.oday=#{oday}
    </select>


</mapper>